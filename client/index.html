<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chore Tracker</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            pantone564: '#4F9A94',
            pantone604: '#E8BBE8',
          }
        }
      }
    }
  </script>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script crossorigin src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
</head>
<body class="bg-gradient-to-br from-pantone604/10 to-pantone564/10 min-h-screen flex items-center justify-center">
  <div id="root" class="w-full"></div>

  <script type="text/babel">
    const { useState } = React;

    function ChoreTracker() {
      const [newChore, setNewChore] = useState("");
      const [chores, setChores] = useState(["Dishes", "Vacuum Living Room", "Take Out Trash", "Clean Bathroom", "Laundry"]);

      const [assignments, setAssignments] = useState([
        { choreId: "Dishes", day: "Monday", users: ["Alice", "Bob"] },
        { choreId: "Dishes", day: "Wednesday", users: ["Charlie"] },
        { choreId: "Vacuum Living Room", day: "Tuesday", users: ["Alice"] },
        { choreId: "Take Out Trash", day: "Thursday", users: ["Bob", "Charlie"] },
        { choreId: "Clean Bathroom", day: "Saturday", users: ["Alice"] },
        { choreId: "Laundry", day: "Sunday", users: ["Charlie"] },
      ]);

      const [newUser, setNewUser] = useState("");
      const [selectedCell, setSelectedCell] = useState(null);

      const weekdays = ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"];

      const addChore = () => {
        if (newChore.trim() && !chores.includes(newChore.trim())) {
          setChores([...chores, newChore.trim()]);
          setNewChore("");
        }
      };

      const getUsersForChoreAndDay = (chore, day) => {
        const assignment = assignments.find(a => a.choreId === chore && a.day === day);
        return assignment ? assignment.users : [];
      };

      const addUserToChore = (chore, day, user) => {
        if (!user.trim()) return;
        const existing = assignments.find(a => a.choreId === chore && a.day === day);
        if (existing) {
          if (!existing.users.includes(user)) {
            setAssignments(assignments.map(a => a.choreId === chore && a.day === day ? { ...a, users: [...a.users, user] } : a));
          }
        } else {
          setAssignments([...assignments, { choreId: chore, day, users: [user] }]);
        }
        setNewUser("");
        setSelectedCell(null);
      };

      const removeUserFromChore = (chore, day, user) => {
        setAssignments(
          assignments
            .map(a => a.choreId === chore && a.day === day ? { ...a, users: a.users.filter(u => u !== user) } : a)
            .filter(a => a.users.length > 0)
        );
      };

      return (
        <div className="p-6 max-w-7xl mx-auto">
          <div className="mb-6 bg-white rounded shadow p-4">
            <h2 className="text-lg font-bold text-pantone564 mb-3">Chore Tracker</h2>
            <div className="flex gap-2">
              <input
                className="flex-1 border p-2 rounded"
                placeholder="Enter chore name..."
                value={newChore}
                onChange={e => setNewChore(e.target.value)}
                onKeyDown={e => e.key === 'Enter' && addChore()}
              />
              <button
                className="bg-pantone564 hover:bg-pantone564/90 text-white px-3 py-2 rounded"
                onClick={addChore}
              >
                Add
              </button>
            </div>
          </div>

          <div className="bg-white rounded shadow p-4 overflow-x-auto">
            <h3 className="text-lg font-bold text-pantone564 mb-3">Weekly Overview</h3>
            <div className="grid grid-cols-8 gap-2 min-w-[800px]">
              <div className="font-semibold p-3 text-center">Chores</div>
              {weekdays.map(day => (
                <div key={day} className="font-semibold p-3 text-center border-b bg-pantone604/30 text-pantone564">
                  {day}
                </div>
              ))}
              {chores.map(chore => (
                <div key={chore} className="contents">
                  <div className="font-medium p-3 border-r bg-pantone564/20 flex items-center text-pantone564">
                    {chore}
                  </div>
                  {weekdays.map(day => {
                    const users = getUsersForChoreAndDay(chore, day);
                    const isSelected = selectedCell && selectedCell.chore === chore && selectedCell.day === day;
                    return (
                      <div
                        key={`${chore}-${day}`}
                        className={`p-2 border min-h-[80px] cursor-pointer transition-colors ${isSelected ? 'bg-pantone604/30' : 'hover:bg-pantone604/20'}`}
                        onClick={() => setSelectedCell(isSelected ? null : { chore, day })}
                      >
                        <div className="flex flex-wrap gap-1">
                          {users.map(user => (
                            <span
                              key={user}
                              className="bg-pantone564 text-white text-xs flex items-center gap-1 px-1 rounded"
                            >
                              {user}
                              <svg
                                onClick={e => { e.stopPropagation(); removeUserFromChore(chore, day, user); }}
                                xmlns="http://www.w3.org/2000/svg"
                                className="w-3 h-3 cursor-pointer hover:text-red-500"
                                viewBox="0 0 24 24"
                                fill="none"
                                stroke="currentColor"
                                strokeWidth="2"
                                strokeLinecap="round"
                                strokeLinejoin="round"
                              >
                                <line x1="18" y1="6" x2="6" y2="18" />
                                <line x1="6" y1="6" x2="18" y2="18" />
                              </svg>
                            </span>
                          ))}
                        </div>
                        {isSelected && (
                          <div className="mt-2 flex gap-1" onClick={e => e.stopPropagation()}>
                            <input
                              className="text-xs border rounded h-6 px-1"
                              placeholder="User name"
                              value={newUser}
                              onChange={e => setNewUser(e.target.value)}
                              onKeyDown={e => {
                                if (e.key === 'Enter') addUserToChore(chore, day, newUser);
                                if (e.key === 'Escape') { setSelectedCell(null); setNewUser(''); }
                              }}
                              autoFocus
                            />
                            <button
                              className="h-6 px-2 bg-pantone604 hover:bg-pantone604/90 text-pantone564 rounded text-xs"
                              onClick={() => addUserToChore(chore, day, newUser)}
                            >
                              +
                            </button>
                          </div>
                        )}
                        {!isSelected && users.length === 0 && (
                          <div className="text-xs text-gray-500 text-center mt-2">Click to assign</div>
                        )}
                      </div>
                    );
                  })}
                </div>
              ))}
            </div>
          </div>
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById('root')).render(<ChoreTracker />);
  </script>
</body>
</html>
